{% extends "base.html" %}  <!-- Подключаем базовый шаблон base.html, чтобы использовать его структуру, типа хедера и футера -->

{% load django_bootstrap5 %}  <!-- Загружаем теги Bootstrap, чтобы формы и кнопки были красивыми и стилизованными -->

{% block title %}  <!-- Блок для заголовка страницы, который попадёт в <title> -->
  {% if is_edit %}  <!-- Проверяем переменную is_edit из view -->
    Редактирование комментария  <!-- Если редактируем, пишем это -->
  {% else %}  <!-- Если не редактируем, значит удаляем -->
    Удаление комментария  <!-- Заголовок для удаления -->
  {% endif %}
{% endblock %}

{% block content %}  <!-- Основной блок контента, сюда идёт всё, что видно на странице -->
  {% if user.is_authenticated %}  <!-- Проверяем, залогинен ли юзер, чтобы показывать форму только авторизованным -->
    <div class="col d-flex justify-content-center">  <!-- Контейнер Bootstrap: col - колонка, d-flex и justify-content-center - центрируем -->
      <div class="card" style="width: 40rem;">  <!-- Карточка Bootstrap с шириной 40rem, чтобы всё аккуратно выглядело -->
        <div class="card-header">  <!-- Заголовок карточки -->
          {% if is_edit %}  <!-- Если редактируем -->
            Редактирование комментария  <!-- Пишем это вверху карточки -->
          {% else %}  <!-- Если удаляем -->
            Удаление комментария  <!-- Заголовок для удаления -->
          {% endif %}
        </div>
        <div class="card-body">  <!-- Тело карточки, где форма -->
          <form method="post"  <!-- методом POST для отправки данных -->
            {% if is_edit %}  <!-- Если редактируем, добавляем action -->
              action="{% url 'blog:edit_comment' comment.post_id comment.id %}"  <!-- URL для отправки, берём post_id и id коммента -->
            {% endif %}>  <!-- Закрываем условие прямо в атрибуте -->
            {% csrf_token %}  <!-- Токен защиты от CSRF, нужен для безопасности -->
            {% if not is_delete %}  <!-- Если не удаляем, показываем форму -->
              {% bootstrap_form form %}  <!-- Рисуем форму с полями через Bootstrap, form приходит из view -->
            {% else %}  <!-- Если удаляем -->
              <p>{{ comment.text }}</p>  <!-- Просто показываем текст комментария -->
            {% endif %}
            {% bootstrap_button button_type="submit" content="Отправить" %}  <!-- Кнопка Bootstrap для отправки формы -->
          </form>  <!-- Закрываем форму -->
        </div>  <!-- Закрываем тело карточки -->
      </div>  <!-- Закрываем карточку -->
    </div>  <!-- Закрываем контейнер -->
  {% endif %}  <!-- Закрываем проверку авторизации -->
{% endblock %}  <!-- Закрываем блок контента -->


<!-- посмотреть csrf_token, --- защита от подделки запросов -->