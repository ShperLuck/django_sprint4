{% extends "base.html" %}  <!-- Подключаем базовый шаблон -->

{% load django_bootstrap5 %}  <!-- Загружаем Bootstrap, чтобы форма была красивой и с правильными стилями -->

{% block content %}  <!-- Тут начинается всё, что будет на странице -->
  {% if next %}  <!-- Проверяем, есть ли переменная next, это типа куда юзер хотел попасть -->
    {% if user.is_authenticated %}  <!-- Если юзер уже залогинен -->
      <p class="text-center">  <!-- Текст по центру -->
        У вашего аккаунта нет доступа к этой странице.
        Чтобы продолжить, войдите в систему с аккаунтом,
        у которого есть доступ.
      </p>  <!-- Сообщение, что у юзера нет прав -->
    {% else %}  <!-- Если юзер не залогинен -->
      <p class="text-center">
        Пожалуйста, войдите в систему,
        чтобы просматривать эту страницу.
      </p>  <!-- Просим войти, чтобы увидеть страницу -->
    {% endif %}
  {% endif %}
  <div class="col d-flex justify-content-center">  <!-- Делаем колонку и центрируем всё -->
    <div class="card" style="width: 40rem;">  <!-- Карточка, чтобы всё было аккуратно, ширина 40rem -->
      <div class="card-header">  <!-- Заголовок карточки -->
        Войти в систему  <!-- Пишем, что это страница входа -->
      </div>
      <div class="card-body">  <!-- Тело карточки, тут форма -->
        <form method="post" action="{% url 'login' %}">  <!-- Форма для входа, отправляем данные на URL логина -->
          {% csrf_token %}  <!-- Токен для защиты, чтобы никто не подделал запрос -->
          {% bootstrap_form form %}  <!-- Показываем форму с полями (логин, пароль) -->
          <input type="hidden" name="next" value="{{ next }}">  <!-- Скрытое поле, чтобы после входа юзер попал куда хотел -->
          {% bootstrap_button button_type="submit" content="Войти" %}  <!-- Кнопка для отправки формы -->
        </form>
        <div>
          <a href="{% url 'password_reset' %}">Забыли пароль?</a>  <!-- Ссылка, если юзер забыл пароль -->
        </div>
      </div>  <!-- Закрываем тело карточки -->
    </div>  <!-- Закрываем карточку -->
  </div>  <!-- Закрываем колонку -->
{% endblock %}  <!-- Закрываем блок контента -->
